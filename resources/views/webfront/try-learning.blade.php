<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Vision Foreign Language Center </title>
    <link rel="icon" type="image/png" href="/images/Backup_of_logo.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/try-learning.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/try-learning.css">
    <link rel="stylesheet" href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>

<body>
    <!-- header -->
    <div class="container-fluid">
        <div class="container-navbar">
            <nav class="navbar navbar-expand-xl">
                <div class="container">
                    <a href="/home" class="navbar-brand"><img src="/images/logo1.png" alt="Logo"></a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <!-- Collection of nav links, forms, and other content for toggling -->
                    <div id="navbarCollapse" class="collapse navbar-collapse justify-content-center">
                        <div class="navbar-nav">
                            <a href="#video-lesson" class="nav-item nav-link header-home">Nội dung</a>
                            <a href="#learn-lesson" class="nav-item nav-link header-course">Tìm hiểu bài học</a>
                            <a href="#learn-vocabulary" class="nav-item nav-link">Từ vựng</a>
                            <a href="#review" class="nav-item nav-link">Đánh giá</a>
                            <a href="#contact" class="nav-item nav-link">Liên hệ</a>
                            <a href="#" class="nav-item nav-link">VI</a>
                        </div>
                    </div>
                </div>
            </nav>
        </div>

        <div class="content-video justify-content-center" id="video-lesson">
            <div class="row">
                <div class="col-xl-9">
                    <div class="main-video-container">
                        <video src="/videos/Fake-food.mp4" controls class="main-video" id="videoPlayer"></video>
                        <h3 class="main-vid-title">house flood animation</h3>
                        <h6 class="release-date">20-6-2024</h6>
                    </div>
                </div>
                <div class="col-xl-3">
                    <div class="video-list-container">
                        <div class="list active">
                            <video src="videos/Fake-food.mp4" class="list-video"></video>

                            <h3 class="list-title">house flood animationnnnnnnnnnnnnnn</h3>
                        </div>

                        <div class="list">
                            <video src="videos/Online-scam.mp4" class="list-video"></video>
                            <h3 class="list-title">zoombie walking animation</h3>
                        </div>

                        <div class="list">
                            <video src="videos/War-Veteran.mp4" class="list-video"></video>
                            <h3 class="list-title">emoji falling animation</h3>
                        </div>
                        <div class="list ">
                            <video src="videos/Fake-food.mp4" class="list-video"></video>

                            <h3 class="list-title">house flood animationnnnnnnnnnnnnnn</h3>
                        </div>

                        <div class="list">
                            <video src="videos/Online-scam.mp4" class="list-video"></video>
                            <h3 class="list-title">zoombie walking animation</h3>
                        </div>

                        <div class="list">
                            <video src="videos/War-Veteran.mp4" class="list-video"></video>
                            <h3 class="list-title">emoji falling animation</h3>
                        </div>
                        <div class="list">
                            <video src="videos/Fake-food.mp4" class="list-video"></video>

                            <h3 class="list-title">house flood animationnnnnnnnnnnnnnn</h3>
                        </div>

                        <div class="list">
                            <video src="videos/Online-scam.mp4" class="list-video"></video>
                            <h3 class="list-title">zoombie walking animation</h3>
                        </div>

                        <div class="list">
                            <video src="videos/War-Veteran.mp4" class="list-video"></video>
                            <h3 class="list-title">emoji falling animation</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="button-prev-next-video">
                <div class="container">
                    <div class="text-center fixed-bottom">
                        <button id="prevButton" class="btn btn-prev mr-2">
                            <lord-icon src="https://cdn.lordicon.com/vduvxizq.json" trigger="hover"
                                colors="primary:#ffffff"
                                style="width:20px;height:20px; transform: rotate(180deg); padding:0 0 24px 10px;">
                            </lord-icon>
                            Bài trước
                        </button>
                        <button id="nextButton" class="btn btn-next">
                            Bài tiếp theo
                            <lord-icon src="https://cdn.lordicon.com/vduvxizq.json" trigger="hover"
                                colors="primary:#ffffff" style="width:20px;height:20px; padding: 3px 0 0 5px;">
                            </lord-icon>
                        </button>
                    </div>
                </div>
            </div>
            <div class="my-5">
                <div class="row gx-5 justify-content-center">
                    <!-- Experience Section-->
                    <section>
                        <div class="d-flex align-items-center justify-content-between mb-4">
                            <h2 class="text-primary fw-bolder mb-0">Tìm hiểu bài học</h2>
                        </div>
                        <!-- Experience Card 1-->
                        <div class="card shadow rounded-4 mb-5" id="learn-lesson">
                            <div class="card-body">
                                <div class="row align-items-center gx-5">
                                    <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                        <div class=" p-4 rounded-4">
                                            <div class="text-primary fw-bolder mb-2">Tài liệu văn bản</div>
                                            <div class="small fw-bolder"></div>
                                            <div class="small text-muted">Stark Industries</div>
                                            <div class="small text-muted">Los Angeles, CA</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-8">
                                        <div class="text-content">
                                            <div class="content">
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus
                                                laudantium, voluptatem quis repellendus eaque sit animi illo ipsam
                                                amet
                                                officiis corporis sed aliquam non voluptate corrupti excepturi
                                                maxime
                                                porro fuga.
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus
                                                laudantium, voluptatem quis repellendus eaque sit animi illo ipsam
                                                amet
                                                officiis corporis sed aliquam non voluptate corrupti excepturi
                                                maxime
                                                porro fuga.
                                            </div>
                                            <button class="btn btn-sm toggle-content">Xem thêm</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Experience Card 2-->
                        <div class="card shadow rounded-4 mb-5" id="learn-vocabulary">
                            <div class="card-body">
                                <div class="row align-items-center gx-5">
                                    <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                        <div class="bg-light p-4 rounded-4">
                                            <div class="text-primary fw-bolder mb-2">Tài liệu văn bản</div>
                                            <div class="small fw-bolder"></div>
                                            <div class="small text-muted">Stark Industries</div>
                                            <div class="small text-muted">Los Angeles, CA</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-8">
                                        <div class="text-content">
                                            <div class="content">
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus
                                                laudantium, voluptatem quis repellendus eaque sit animi illo ipsam
                                                amet
                                                officiis corporis sed aliquam non voluptate corrupti excepturi
                                                maxime
                                                porro fuga.
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus
                                                laudantium, voluptatem quis repellendus eaque sit animi illo ipsam
                                                amet
                                                officiis corporis sed aliquam non voluptate corrupti excepturi
                                                maxime
                                                porro fuga.
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus
                                                laudantium, voluptatem quis repellendus eaque sit animi illo ipsam
                                                amet
                                                officiis corporis sed aliquam non voluptate corrupti excepturi
                                                maxime
                                                porro fuga.

                                            </div>
                                            <button class="btn  btn-sm toggle-content">Xem thêm</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- Education Section-->
                    <section class=" exercise-course">
                        <h2 class="text-secondary fw-bolder mb-4">Bài tập</h2>
                        <div class="align-items-center gx-5">
                            <div class="card-body col text-center text-lg-start ">
                                <div class="row align-items-center gx-5">
                                    <div class="col-12">
                                        <div id="video-container">
                                            <video id="video-player" src="/videos/Fake-food.mp4" controls
                                                style="width: 100%; height: auto;"></video>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    </section>
                    {{-- review --}}
                    <div class="container container-rating d-flex justify-content-center align-items-center">
                        <div id="review" class="wrapper">
                            <h3>Đánh giá về bài học.</h3>
                            <form action="#">
                                <div class="form-group">
                                    <input type="number" name="rating" hidden>
                                    <div class="rating">
                                        <i class='bx bx-star star' style="--i: 0;"></i>
                                        <i class='bx bx-star star' style="--i: 1;"></i>
                                        <i class='bx bx-star star' style="--i: 2;"></i>
                                        <i class='bx bx-star star' style="--i: 3;"></i>
                                        <i class='bx bx-star star' style="--i: 4;"></i>
                                        <input type="hidden" name="rating" value="0">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <textarea name="opinion" class="form-control" rows="5" placeholder="Ý kiến của bạn..."></textarea>
                                </div>
                                <div class="form-group">
                                    <div class="btn-group">
                                        <button type="submit" class="btn btn-primary">Gửi</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @include('footer')

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.lordicon.com/lordicon.js"></script>
    <script src="/js/try-learning.js"></script>
    <script>
        //sự kiện click video
        const videoContainer = document.getElementById('video-container');
        const videoPlayer = document.getElementById('video-player');

        videoContainer.addEventListener('click', () => {
            if (videoPlayer.paused) {
                videoPlayer.play();
            } else {
                videoPlayer.pause();
            }
        });

        //review
        const allStar = document.querySelectorAll('.rating .star');
        const ratingValue = document.querySelector('.rating input');

        allStar.forEach((star, index) => {
            star.addEventListener('click', () => {
                ratingValue.value = index + 1;

                allStar.forEach(s => {
                    s.classList.replace('bxs-star', 'bx-star');
                    s.classList.remove('active');
                });

                for (let i = 0; i <= index; i++) {
                    allStar[i].classList.replace('bx-star', 'bxs-star');
                    allStar[i].classList.add('active');
                }
            });
        });

        //ẩn văn bản nếu quá nhiều
        const toggleContentBtns = document.querySelectorAll('.toggle-content');
        const textContents = document.querySelectorAll('.text-content');

        toggleContentBtns.forEach((btn, index) => {
            btn.addEventListener('click', () => {
                textContents[index].classList.toggle('open');
                btn.textContent = textContents[index].classList.contains('open') ? 'Ẩn bớt' : 'Xem thêm';
            });
        });

        //sự kiện click Bài tiếp theo
        const videos = document.querySelectorAll('.list-video');
        const titles = document.querySelectorAll('.list-title');
        const listItems = document.querySelectorAll('.list');

        let currentVideoIndex = 0;

        document.getElementById('nextButton').addEventListener('click', function(event) {
            event.preventDefault();

            videos[currentVideoIndex].pause();
            listItems[currentVideoIndex].classList.remove('active');

            currentVideoIndex = (currentVideoIndex + 1) % videos.length;

            videos[currentVideoIndex].play();
            listItems[currentVideoIndex].classList.add('active');

            document.querySelector('.main-vid-title').textContent = titles[currentVideoIndex].textContent;
            document.querySelector('.main-video').src = videos[currentVideoIndex].src;
        });

        document.getElementById('prevButton').addEventListener('click', function(event) {
            event.preventDefault();

            videos[currentVideoIndex].pause();
            listItems[currentVideoIndex].classList.remove('active');

            currentVideoIndex = (currentVideoIndex - 1 + videos.length) % videos.length;

            videos[currentVideoIndex].play();
            listItems[currentVideoIndex].classList.add('active');

            document.querySelector('.main-vid-title').textContent = titles[currentVideoIndex].textContent;
            document.querySelector('.main-video').src = videos[currentVideoIndex].src;
        });

        //mua khóa học nếu muốn xem hết video
        let isPurchased = false; // Mặc định người dùng chưa mua
        let maxVideosAllowed = 3; // Số video tối đa được xem nếu chưa mua

        function playVideo(index) {
            if ((isPurchased) || (index < maxVideosAllowed)) {
                let selectedVideo = danhSachVideo[index];
                let videoElement = $('#videoPlayer');
                videoElement.attr('src', selectedVideo.videoUrl);
                videoElement.get(0).play();
            } else {
                alert('Bạn cần mua khóa học để xem thêm video!');
            }
        }
        //sự kiện control media cho video
        let videoElement = $('#videoPlayer')[0];
        let playBtn = $('#playBtn');
        let pauseBtn = $('#pauseBtn');
        let volumeRange = $('#volumeRange');
        let videoTime = $('#videoTime');
        let seekRange = $('#seekRange');

        playBtn.on('click', function() {
            videoElement.play();
        });

        pauseBtn.on('click', function() {
            videoElement.pause();
        });

        volumeRange.on('input', function() {
            videoElement.volume = parseFloat(volumeRange.val());
        });

        videoElement.ontimeupdate = function() {
            seekRange.val(videoElement.currentTime);
            videoTime.text(formatTime(videoElement.currentTime) + ' / ' + formatTime(videoElement.duration));
        };

        seekRange.on('input', function() {
            videoElement.currentTime = parseInt(seekRange.val());
        });

        function formatTime(seconds) {
            let minutes = Math.floor(seconds / 60);
            let secs = Math.floor(seconds % 60);
            return minutes + ':' + (secs < 10 ? '0' : '') + secs;
        }
    </script>
</body>

</html>
